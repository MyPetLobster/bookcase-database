{% extends "base.html" %}
{% block title %}Add Books{% endblock %}
{% block content %}

<div class="add-book-container">
    
    <h1>Select Bookcase</h1>
    <form action="/add-book/" method="post">
        <select name="bookcase" id="bookcase">
            {% for bookcase in bookcases %}
            <option value="{{ bookcase.id }}">{{ bookcase.name }}</option>
            {% endfor %}
        </select>
    </form>

    <form action="/add-book/" method="post" class="create-bookcase">
        <label for="bookcase-name">Bookcase Name</label>
        <input type="text" name="bookcase-name" id="bookcase-name" placeholder="Bookcase Name" required>
        <input type="submit" value="Create Bookcase">
    </form>

        <!--Search form that includes author, title and isbn fields-->
    <form action="/add-book/" method="post" class="search-book">
        <label for="title">Title</label>
        <input type="text" name="title" id="title" placeholder="Title" required>
        <label for="author">Author</label>
        <input type="text" name="author" id="author" placeholder="Author" required>
        <label for="isbn">ISBN</label>
        <input type="text" name="isbn" id="isbn" placeholder="ISBN">
        <input type="submit" value="Search">
        <input type="submit" value="Select Bookcase">
    </form>

    <!--!Search results-->
    <div class="search-results">
        <h2>Search Results</h2>
        <div class="search-results-container">
            {% for book in search_results %}
            <div class="search-result">
                <div class="search-result-cover">
                    <img src="{{ book.volumeInfo.imageLinks.medium }}" alt="{{ book.title }} Cover">
                </div>
                <div class="search-result-info">
                    <h3>{{ book.volumeInfo.title }}</h3>
                    <h4>{% for author in book.volumeInfo.authors %}
                        {{ author }}{{% if not forloop.last %}}, {% endif %} 
                        {% endfor %}
                    </h4>
                    <p>ISBN: {{ book.volumeInfo.isbn }}</p>
                    <p>Categories: {% for category in book.volumeInfo.categories %}
                        {{ category }}{{% if not forloop.last %}}, {% endif %} 
                        {% endfor %}
                    </p>
                    <p>Year: {{ book.volumeInfo.publishedDate.split("-")[0] }}</p>
                    <p>Pages: {{ book.volumeInfo.pageCount }}</p>
                    <p>Google Books Rating: {{ book.volumeInfo.averageRating }}</p>
                    <p>Goodreads Rating: IMPLEMENT THIS?</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>




{% endblock %}